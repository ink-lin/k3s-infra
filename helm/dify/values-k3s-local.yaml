# k3s local 測試 Dify 配置

# Nginx Service
nginx:
  service:
    type: ClusterIP  # 本機測試用，不用 LoadBalancer

# 核心持久化
persistence:
  enabled: true
  storageClass: local-path
  accessMode: ReadWriteOnce  # k3s local-path 不支援 RWX

# PostgreSQL
postgresql:
  persistence:
    enabled: true
    storageClass: local-path
    accessMode: ReadWriteOnce

# Redis
redis:
  persistence:
    enabled: true
    storageClass: local-path
    accessMode: ReadWriteOnce

# Weaviate（向量資料庫）
weaviate:
  persistence:
    enabled: true
    storageClass: local-path
    accessMode: ReadWriteOnce

# Plugin Daemon（local 測試先關閉 persistence，避免 PVC Pending）
pluginDaemon:
  persistence:
    enabled: false

# Web / dify-local 目錄 PVC（local 測試先關掉）
persistenceWeb:
  enabled: false
